### 网络五层
- 物理层    `双绞线,光纤  电信号 ` 
- 数据链路层 `传输的是帧`  
- 网络层   `IP,ICMP,ARP,RARP`
- 传输层   `TCP/UDP`  
- 应用层   `HTTP,HTTPS,FTP,SFTP,DNS(udp)`

| 左对齐 | 介质 | 协议 | 传输单元 |
| :-----| :----: | :----: |:----: |
| 物理层 | 双绞线,光纤 |  | 0,1 | 
| 数据链路层 | 单元格 | PPP,CSMA/CD |  帧 |
| 网络层 | 单元格 | ARP,ICMP,IGMP  |  IP 数据报 |
| 传输层 | 单元格 | 单元格 |  |
| 应用层 | 单元格 | 单元格 | 单元格 |

#### 物理层 
数据在物理链路上一般是串行传输,主要方式有点对点,或者广播,
- 传输介质  双绞线,光缆,无线信道.  
- 通信方式 单向,半双工,全双工  
- 信号调制 编码技术,曼彻斯特编码,差分曼彻斯特  
- 信道的极限传输速率可以通过香农公式计算,
- 信道复用  时分多路复用,频分多路复用
- ADSL FTTX

#### 数据链路层
- 封装成帧    
把网络层的 IP数据报添加首部和尾部后,封装成帧 MTU 最大传输单元  
- 透明传输  
透传就是不作处理,直接传输 注意控制字符需要转义    
- 差错检测    
常见方法 CRC ,计算冗余码 ,可做到帧本身的数据无误,无法解决 帧丢失 重复 失序问题  
> 数据链路层也有确认和重传机制,但是在有线网络中,不启用(传输层控制),在无线网络中,启用该机制
MAC

#### 网络层
只提供无连接的,简单灵活的,尽最大努力交付的数据报服务;  
IP 协议,ARP,ICMP,IGMP   
用 IP 协议把不同设备连接起来,网络层及以上使用 ip 地址,数据链路层使用 mac 地址
- IPV4
点分 10 进制   冒号 16 进制(128 位)
- ARP  
IP 查 mac  
- 路由表  
根据目的网络地址来确定下一跳 
- 划分子网
当一个数据报到达路由器,路由器使用目的 IP `按位与` 子网掩码,来得到子网的网络地址.就可以把数据报交给子网.

#### 传输层
[tcp 三次握手 四次挥手](/protocol/tcp-udp.md)  



在网络层只能看到 IP 数据报(源 IP 和目的 IP 不会变),数据链路层只能看到 MAC 帧(源 MAC 和目的 MAC 会变 )  



#### 实际概览
数据链路层传输 mac 帧,根据 mac 地址和自身比对来选择是否接受某一个帧,接收mac 帧后,去掉 mac 首部和尾部,把剩下的包交给网络层,网络层会根据 ip数据报中的首部中找到源IP 和目的 IP,然后根据目的 IP 查询路由表得到下一跳IP,使用 ARP 协议得到mac 地址,然后把 mac 地址放到数据链路层首部中,根据这个硬件地址去找到下一跳的路由器,


#### 关键点
网络核心路由器传输数据报时只用到了 下面三层,而应用程序之间的通信才用到了传输层